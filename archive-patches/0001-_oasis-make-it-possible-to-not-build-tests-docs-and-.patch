From 77cd0a47bdd6fc3221d978a72e1dcd828b5ee11c Mon Sep 17 00:00:00 2001
From: Adrien Nader <adrien@notk.org>
Date: Sun, 16 Mar 2014 18:57:58 +0100
Subject: [PATCH 1/4] _oasis: make it possible to not build tests, docs and lwt
 support.

---
 _oasis | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/_oasis b/_oasis
index c17a6b7..3758ae6 100644
--- a/_oasis
+++ b/_oasis
@@ -20,6 +20,10 @@ Description:
   .
   [libarchive website](http://code.google.com/p/libarchive/)
 
+Flag "archivelwt"
+  Description: Also provide operations as lwt threads
+  Default:     true
+
 Library "archive-ocaml"
   Path:       src
   Modules:    Archive, ArchiveLow
@@ -29,6 +33,7 @@ Library "archive-ocaml"
   BuildDepends: unix, fileutils
 
 Library "archive-lwt"
+  Build$:        flag(archivelwt)
   Path:          src
   BuildDepends:  archive, lwt (>= 2.3.2), lwt.preemptive, threads
   Modules:       ArchiveLwt
@@ -36,6 +41,7 @@ Library "archive-lwt"
   FindlibName:   lwt
 
 Executable test
+  Build$:       flag(tests)
   Path:         test
   BuildTools:   ocamlbuild
   MainIs:       test.ml
-- 
1.8.4

